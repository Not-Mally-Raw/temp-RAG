{
  "consolidated_at": "2026-01-23T12:10:24.366083",
  "total_documents": 1,
  "total_rules": 4,
  "documents": [
    {
      "source_pdf": "DFM_Tricky_Rules_Test_Set.pdf",
      "rule_count": 4,
      "rules": [
        {
          "rule_text": "The minimum distance between two counterbores is eight times the material thickness.",
          "rule_type": "Sheetmetal",
          "formal_rule": {
            "schema_valid": true,
            "geometry_valid": true,
            "geometry_relation": {
              "type": "distance",
              "from": "Counterbore",
              "to": "Counterbore",
              "constraint": ">= 8 * ModuleParams.Thickness"
            },
            "ast": {
              "operator": ">=",
              "left": {
                "expression": "Distance(Counterbore, Counterbore)"
              },
              "right": {
                "expression": "8 * ModuleParams.Thickness"
              }
            }
          }
        },
        {
          "rule_text": "The minimum distance from a counterbore to a bend is four times the material thickness plus the bend radius.",
          "rule_type": "Sheetmetal",
          "formal_rule": {
            "schema_valid": true,
            "geometry_valid": true,
            "geometry_relation": {
              "type": "distance",
              "from": "Counterbore",
              "to": "Bend",
              "constraint": ">= 4 * ModuleParams.Thickness + Bend.MinRadius"
            },
            "ast": {
              "operator": ">=",
              "left": {
                "expression": "Distance(Counterbore, Bend)"
              },
              "right": {
                "operator": "max",
                "operands": [
                  { "expression": "4 * ModuleParams.Thickness" },
                  { "expression": "Bend.MinRadius" }
                ]
              }
            }
          }
        },
        {
          "rule_text": "The minimum distance between a curl and the edge of a hole is the radius of the curl plus the material thickness.",
          "rule_type": "Sheetmetal",
          "formal_rule": {
            "schema_valid": false,
            "geometry_valid": false,
            "error": "Schema Gap: Curl",
            "geometry_relation": {
              "type": "distance",
              "from": "Curl",
              "to": "Hole.Edge",
              "constraint": ">= Curl.Radius + ModuleParams.Thickness"
            }
          }
        },
        {
          "rule_text": "The minimum spacing between adjacent holes shall be at least twice the material thickness.",
          "rule_type": "Sheetmetal",
          "formal_rule": {
            "schema_valid": true,
            "geometry_valid": true,
            "geometry_relation": {
              "type": "distance",
              "from": "Hole",
              "to": "Hole",
              "constraint": ">= 2 * ModuleParams.Thickness"
            },
            "ast": {
              "operator": ">=",
              "left": {
                "expression": "Distance(Hole, Hole)"
              },
              "right": {
                "expression": "2 * ModuleParams.Thickness"
              }
            }
          }
        }
      ]
    }
  ]
}
